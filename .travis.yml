language: cpp

matrix:
    os:
        - linux
        - osx 

        compiler:
            - clang
                
    #os:
    #    - windows
    
env:
    # Список переменных окружения, влияющих на матрицу сборки:
    - TARGET_CPU=amd64 BUILD_CONFIGURATION=Debug
    - TARGET_CPU=amd64 BUILD_CONFIGURATION=Release
    - TARGET_CPU=x86 BUILD_CONFIGURATION=Debug
    - TARGET_CPU=x86 BUILD_CONFIGURATION=Release        

script:
    # Сборочный скрипт
    - mkdir -p build
    - cd build
    - cmake .. -DCMAKE_BUILD_TYPE=$BUILD_CONFIGURATION -DTARGET_CPU=$TARGET_CPU
    - cmake --build .
    #- ctest --output-on-failure

#deploy:
#    provider: releases # выкладываем на GitHub Releases
#
#    api_key:
#        secure: encrypted-github-token # токен, зашифрованный с помощью `travis encrypt`
#
#    file:
#        # список артефактов
#        - klondike
#
#    skip_cleanup: true # не удалять сгенерированные во время сборки файлы перед развёртыванием
#
#    on:
#        tags: true     # выполнять deploy только для tagged-commit